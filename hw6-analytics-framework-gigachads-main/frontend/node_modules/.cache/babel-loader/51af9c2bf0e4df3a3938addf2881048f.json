{"ast":null,"code":"var _jsxFileName = \"/Users/nathanan/Documents/CMU Senior Spring 2022/17-514 Software Construction/hw5_santorini/santorini/frontend/src/App.tsx\";\nimport { Component } from 'react';\nimport './App.css';\nimport { Square } from './Square';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar oldHref = \"http://localhost:3000\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cells: [{\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }, {\n        text: \"\",\n        clazz: \"playable\"\n      }],\n      instructions: \"\",\n      posSelection: -1,\n      workerSelection: -1,\n      turn: 0,\n      playerStates: []\n    };\n    this.clickHandler = this.clickHandler.bind(this);\n    this.resetSelections = this.resetSelections.bind(this);\n  }\n\n  clickHandler(index) {\n    console.log(index);\n\n    if (this.tileHasWorker(Math.floor(index / 5), index % 5) != -1) {\n      this.setState({\n        workerSelection: index\n      });\n    } else {\n      this.setState({\n        posSelection: index\n      });\n    }\n\n    this.updateInstructions();\n  }\n\n  updateInstructions() {\n    var instructions = \"\";\n\n    if (this.state.workerSelection == -1) {\n      instructions = \"Select a worker\";\n    } else if (this.state.posSelection == -1) {\n      instructions = \"Select a position\";\n    } else {\n      instructions = \"Select a command\";\n    }\n\n    this.setState({\n      instructions: instructions\n    });\n  }\n\n  updateStateFromGame(json) {\n    const turn = Number(this.getTurn(json));\n    const newCells = this.convertToCell(json);\n    this.updateInstructions();\n    this.setState({\n      cells: this.convertToCell(json),\n      turn: turn,\n      playerStates: this.convertPlayerStates(json)\n    });\n  }\n\n  convertPlayerStates(p) {\n    if (p[\"playerStates\"] == null) {\n      return [];\n    }\n\n    const playerStates = [];\n\n    for (var i = 0; i < p[\"playerStates\"].length; i++) {\n      const workerStates = [];\n\n      for (var j = 0; j < p[\"playerStates\"][i][\"workerStates\"].length; j++) {\n        var w = {\n          workerId: p[\"playerStates\"][i][\"workerStates\"][j][\"workerId\"],\n          x: p[\"playerStates\"][i][\"workerStates\"][j][\"x\"],\n          y: p[\"playerStates\"][i][\"workerStates\"][j][\"y\"]\n        };\n        workerStates.push(w);\n      }\n\n      var c = {\n        playerId: p[\"playerStates\"][i][\"playerId\"],\n        workerStates: workerStates\n      };\n      playerStates.push(c);\n    }\n\n    return playerStates;\n  }\n\n  convertToCell(p) {\n    const newCells = [];\n\n    for (var i = 0; i < p[\"board\"].length; i++) {\n      var c = {\n        text: p[\"board\"][i][\"text\"],\n        clazz: `clazz`\n      };\n      newCells.push(c);\n    }\n\n    return newCells;\n  }\n\n  getTurn(p) {\n    return p[\"turn\"];\n  }\n\n  getWinner(p) {\n    return p[\"winner\"];\n  }\n\n  getInstr(turn, winner) {\n    if (winner === undefined) return \"It is Player \" + turn + \"'s turn\";else return \"Player \" + winner + \" wins!\";\n  }\n\n  async newGame() {\n    const response = await fetch(\"newgame\");\n    const json = await response.json();\n    this.updateStateFromGame(json);\n  }\n\n  async setWorker(url) {\n    const href = \"setworker?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n    this.updateStateFromGame(json);\n  }\n\n  async move(url) {\n    const href = \"move?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n    this.updateStateFromGame(json);\n  }\n\n  async build(url) {\n    const href = \"build?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n    this.updateStateFromGame(json);\n  }\n\n  async undo() {\n    const response = await fetch(\"undo\");\n    const json = await response.json();\n    this.updateStateFromGame(json);\n  }\n\n  async endTurn() {\n    const response = await fetch(\"endturn\");\n    const json = await response.json();\n    console.log(json);\n    this.updateStateFromGame(json);\n  }\n\n  async switch() {\n    if (window.location.href === \"http://localhost:3000/newgame\" && oldHref !== window.location.href) {\n      console.log(\"newGame\");\n      this.newGame();\n      oldHref = window.location.href;\n    } else if (window.location.href.split(\"?\")[0] === \"http://localhost:3000/build\" && oldHref !== window.location.href) {\n      this.build(window.location.href);\n      oldHref = window.location.href;\n    } else if (window.location.href.split(\"?\")[0] === \"http://localhost:3000/move\" && oldHref !== window.location.href) {\n      this.move(window.location.href);\n      oldHref = window.location.href;\n    } else if (window.location.href === \"http://localhost:3000/undo\" && oldHref !== window.location.href) {\n      this.undo();\n      oldHref = window.location.href;\n    } else if (window.location.href === \"http://localhost:3000/endturn\" && oldHref !== window.location.href) {\n      console.log(\"endTurn\");\n      this.endTurn();\n      oldHref = window.location.href;\n    } else if (window.location.href.split(\"?\")[0] === \"http://localhost:3000/setworker\" && oldHref !== window.location.href) {\n      console.log(\"setWorker\");\n      this.setWorker(window.location.href);\n      oldHref = window.location.href;\n    }\n  }\n\n  tileHasWorker(x, y) {\n    console.log(x, y);\n    console.log(this.state.playerStates);\n\n    for (var player of this.state.playerStates) {\n      for (var workerState of player.workerStates) {\n        if (workerState.x == x && workerState.y == y) {\n          return workerState.workerId;\n        }\n      }\n    }\n\n    return -1;\n  }\n\n  resetSelections() {\n    this.setState({\n      workerSelection: -1,\n      posSelection: -1\n    });\n  }\n\n  render() {\n    this.switch();\n    const style = {\n      margin: 'auto',\n      width: \"auto\",\n      height: \"auto\",\n      backgroundColor: 'darkorange',\n      color: 'white',\n      fontSize: \"3em\",\n      tableLayout: 'fixed'\n    };\n    const rows = [0, 0, 0, 0, 0].map((_, i) => {\n      return /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: [...this.state.cells].splice(i * 5, 5).map((_ref, j) => {\n          let {\n            text,\n            clazz\n          } = _ref;\n          return /*#__PURE__*/_jsxDEV(Square, {\n            onClick: () => {\n              this.clickHandler(i * 5 + j);\n            }\n          }, i * 5 + j, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 13\n          }, this);\n        })\n      }, \"row_\" + i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 279,\n        columnNumber: 9\n      }, this);\n    });\n    let playerStatesP = [];\n\n    if (this.state.playerStates != [] && this.state.playerStates[0] && this.state.playerStates[0].hasOwnProperty(\"workerStates\")) {\n      playerStatesP = this.state.playerStates.map(_ref2 => {\n        let {\n          playerId,\n          workerStates\n        } = _ref2;\n        return /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Player\", playerId, \":\", workerStates.map(_ref3 => {\n            let {\n              x,\n              y\n            } = _ref3;\n            return /*#__PURE__*/_jsxDEV(\"p\", {\n              children: [\"(\", x, \",\", y, \")\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 41\n            }, this);\n          })]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 9\n        }, this);\n      });\n    }\n\n    const decisionState = \"player=\" + this.state.turn + \"&worker=\" + this.state.workerSelection + \"&pos=\" + this.state.posSelection;\n    const buildHref = \"/build?\" + decisionState;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: \"center\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: \"Santorini\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"It is Player \", this.state.turn, \"'s turn \"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Instruction: \", this.state.instructions]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Worker Selection: \", this.state.workerSelection]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 310,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Position Selection: \", this.state.posSelection]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: playerStatesP\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n          cellSpacing: \"0\",\n          id: \"table\",\n          style: {\n            margin: 'auto',\n            width: \"auto\",\n            height: \"auto\",\n            backgroundColor: 'darkorange',\n            color: 'white',\n            fontSize: \"3em\",\n            tableLayout: 'fixed'\n          },\n          children: /*#__PURE__*/_jsxDEV(\"tbody\", {\n            children: rows\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"bottombar\",\n        children: [/*#__PURE__*/_jsxDEV(\"a\", {\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: this.resetSelections,\n            children: \"Reset Selections\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 16\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/setworker?\" + decisionState,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"SetWorker\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 332,\n            columnNumber: 54\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/build?\" + decisionState,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"Build\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 333,\n            columnNumber: 50\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/move?\" + decisionState,\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"Move\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 48\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/endturn\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"End Turn\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 335,\n            columnNumber: 34\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"/newgame\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            children: \"New Game\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 34\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 330,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 305,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\n;\nexport default App;","map":{"version":3,"sources":["/Users/nathanan/Documents/CMU Senior Spring 2022/17-514 Software Construction/hw5_santorini/santorini/frontend/src/App.tsx"],"names":["Component","Square","oldHref","App","constructor","props","state","cells","text","clazz","instructions","posSelection","workerSelection","turn","playerStates","clickHandler","bind","resetSelections","index","console","log","tileHasWorker","Math","floor","setState","updateInstructions","updateStateFromGame","json","Number","getTurn","newCells","convertToCell","convertPlayerStates","p","i","length","workerStates","j","w","workerId","x","y","push","c","playerId","getWinner","getInstr","winner","undefined","newGame","response","fetch","setWorker","url","href","split","move","build","undo","endTurn","switch","window","location","player","workerState","render","style","margin","width","height","backgroundColor","color","fontSize","tableLayout","rows","map","_","splice","playerStatesP","hasOwnProperty","decisionState","buildHref","textAlign"],"mappings":"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","sourcesContent":["import Handlebars from \"handlebars\"\nimport { Component } from 'react'\nimport './App.css'\nimport { Square } from './Square'\n\nvar oldHref = \"http://localhost:3000\"\n\ninterface Cell {\n  text: String;\n  clazz: String;\n}\n\ninterface WorkerState {\n  workerId: Number;\n  x: Number;\n  y: Number;\n}\n\ninterface PlayerState {\n  playerId: Number;\n  workerStates: Array<WorkerState>;\n}\n\ninterface Cells {\n  cells: Array<Cell>,\n  instructions: String,\n  playerStates: Array<PlayerState>\n  workerSelection: Number\n  posSelection: Number\n  turn: Number\n  \n}\n\ninterface Props {\n}\n\nclass App extends Component<Props, Cells> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      cells: [ \n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"},\n        { text: \"\", clazz: \"playable\"}, \n      ],\n      instructions: \"\",\n      posSelection: -1,\n      workerSelection: -1,\n      turn: 0,\n      playerStates: [],\n    };\n    this.clickHandler = this.clickHandler.bind(this);\n    this.resetSelections = this.resetSelections.bind(this);\n  }\n\n\n  clickHandler(index: number){\n    console.log(index)\n    if(this.tileHasWorker(Math.floor(index/5), index%5) != -1) {\n      this.setState({workerSelection: index});\n    } else {\n      this.setState({posSelection: index});\n    }\n\n    this.updateInstructions()\n\n  }\n\n  updateInstructions() {\n    var instructions = \"\"\n    if(this.state.workerSelection == -1) {\n      instructions = \"Select a worker\"\n    } else if (this.state.posSelection == -1) {\n      instructions = \"Select a position\"\n    } else {\n      instructions = \"Select a command\"\n    }\n    this.setState({instructions: instructions})\n  }\n\n  updateStateFromGame(json: Object) {\n    const turn = Number(this.getTurn(json))\n\n    const newCells: Array<Cell> = this.convertToCell(json)\n    this.updateInstructions()\n\n    this.setState({ cells: this.convertToCell(json), turn: turn,\n                    playerStates: this.convertPlayerStates(json)})\n  }\n\n  convertPlayerStates(p: any) : Array<PlayerState> {\n    if (p[\"playerStates\"] == null) {\n      return [];\n    }\n    const playerStates: Array<PlayerState> = [];\n    for (var i = 0; i < p[\"playerStates\"].length; i++) {\n      const workerStates: Array<WorkerState> = [];\n      for (var j = 0; j < p[\"playerStates\"][i][\"workerStates\"].length; j++) {\n        var w: WorkerState = {\n          workerId: p[\"playerStates\"][i][\"workerStates\"][j][\"workerId\"],\n          x: p[\"playerStates\"][i][\"workerStates\"][j][\"x\"],\n          y: p[\"playerStates\"][i][\"workerStates\"][j][\"y\"]\n        }\n        workerStates.push(w);\n      }\n      var c: PlayerState = {\n        playerId: p[\"playerStates\"][i][\"playerId\"],\n        workerStates: workerStates,\n      };\n      playerStates.push(c);\n    }\n    return playerStates;\n  }\n  convertToCell(p: any): Array<Cell> {\n    const newCells: Array<Cell> = [];\n    \n    for (var i = 0; i < p[\"board\"].length; i++) {\n      var c: Cell = {\n        text: p[\"board\"][i][\"text\"],\n        clazz: `clazz`,\n      };\n      newCells.push(c);\n    }\n\n    return newCells;\n  }\n\n  getTurn(p: any): String {\n    return p[\"turn\"]\n  }\n\n  getWinner(p: any): String | undefined {\n    return p[\"winner\"]\n  }\n\n  getInstr(turn: String, winner: String | undefined) {\n    if (winner === undefined) return \"It is Player \" + turn + \"'s turn\"\n    else return \"Player \" + winner + \" wins!\"\n  }\n\n  async newGame() {\n    const response = await fetch(\"newgame\");\n    const json = await response.json();\n    this.updateStateFromGame(json);\n  }\n\n  async setWorker(url: String) {\n    const href = \"setworker?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n    this.updateStateFromGame(json)\n  }\n\n  async move(url: String) {\n    const href = \"move?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n    this.updateStateFromGame(json)\n  }\n\n  async build(url: String) {\n    const href = \"build?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n    this.updateStateFromGame(json)\n  }\n\n\n  async undo() {\n    const response = await fetch(\"undo\");\n    const json = await response.json();\n    this.updateStateFromGame(json)\n  }\n\n  async endTurn() {\n    const response = await fetch(\"endturn\");\n    const json = await response.json();\n    console.log(json)\n    this.updateStateFromGame(json)\n  }\n\n  async switch() {\n    if (\n      window.location.href === \"http://localhost:3000/newgame\" &&\n      oldHref !== window.location.href\n    ) {\n      console.log(\"newGame\")\n      this.newGame();\n      oldHref = window.location.href;\n    } else if (\n      window.location.href.split(\"?\")[0] === \"http://localhost:3000/build\" &&\n      oldHref !== window.location.href\n    ) {\n      this.build(window.location.href);\n      oldHref = window.location.href;\n    } else if (\n        window.location.href.split(\"?\")[0] === \"http://localhost:3000/move\" &&\n        oldHref !== window.location.href\n      ) {\n        this.move(window.location.href);\n        oldHref = window.location.href;\n    } else if (\n      window.location.href === \"http://localhost:3000/undo\" &&\n      oldHref !== window.location.href\n    ) {\n      this.undo();\n      oldHref = window.location.href;\n    } else if (\n      window.location.href === \"http://localhost:3000/endturn\" &&\n      oldHref !== window.location.href\n    ) {\n      console.log(\"endTurn\")\n      this.endTurn();\n      oldHref = window.location.href;\n    } else if (\n      window.location.href.split(\"?\")[0] === \"http://localhost:3000/setworker\" &&\n      oldHref !== window.location.href\n    ) {\n      \n      console.log(\"setWorker\")\n      this.setWorker(window.location.href);\n      oldHref = window.location.href;\n    }\n  };\n\n  tileHasWorker(x : Number, y : Number) : Number {\n    console.log(x,y);\n    console.log(this.state.playerStates);\n    for (var player of this.state.playerStates) {\n      for (var workerState of player.workerStates) {\n        if (workerState.x == x && workerState.y == y) {\n          return workerState.workerId;\n        }\n      }\n    }\n    return -1;\n  }\n\n  resetSelections() {\n    this.setState({workerSelection: -1, posSelection: -1});\n  }\n\n  render() {\n    this.switch()\n\n    const style = {\n      margin:'auto',\n      width: \"auto\",\n      height:\"auto\",\n      backgroundColor:'darkorange',\n      color:'white',\n      fontSize:\"3em\",\n      tableLayout:'fixed',\n    }\n    \n    const rows = [0,0,0,0,0].map((_,i) => { return ( \n        <tr key={\"row_\" + i}>\n          { [...this.state.cells].splice(i*5,5).map(({ text, clazz },j) => { return (\n            <Square\n              key={i*5+j}\n              onClick={()=>{this.clickHandler(i*5+j)}}\n           />\n          )}\n          )}\n        </tr>)\n      }\n    );\n\n    let playerStatesP : JSX.Element[] = []\n    \n    if (this.state.playerStates != [] && this.state.playerStates[0] && this.state.playerStates[0].hasOwnProperty(\"workerStates\")) {\n      playerStatesP = this.state.playerStates.map(({playerId, workerStates}) => { return ( \n        <p>Player{playerId}: \n          { workerStates.map(({x,y}) => <p>({x},{y})</p>) }\n        </p>\n      ) }\n    );\n    }\n    const decisionState = \"player=\" + this.state.turn + \"&worker=\" + this.state.workerSelection + \"&pos=\" + this.state.posSelection;\n    const buildHref = \"/build?\" + decisionState;\n\n    return (\n      <div className=\"App\">\n          <div style={{textAlign:\"center\"}}>\n            <h1>Santorini</h1>\n            <p>It is Player {this.state.turn}'s turn </p>\n            <p>Instruction: {this.state.instructions}</p>\n            <p>Worker Selection: {this.state.workerSelection}</p>\n            <p>Position Selection: {this.state.posSelection}</p>\n            <div>\n              {playerStatesP}\n            </div>\n            <table cellSpacing=\"0\" id=\"table\" style={{\n              margin:'auto',\n              width: \"auto\",\n              height:\"auto\",\n              backgroundColor:'darkorange',\n              color:'white',\n              fontSize:\"3em\",\n              tableLayout:'fixed'\n            }}>\n              <tbody>\n                {rows}\n              </tbody>\n            </table>\n            <br />\n          </div>\n          <div id=\"bottombar\">\n            <a><button onClick={this.resetSelections}>Reset Selections</button></a>\n            <a href={\"/setworker?\" + decisionState} ><button>SetWorker</button></a>\n            <a href={\"/build?\" + decisionState} ><button>Build</button></a>\n            <a href={\"/move?\" + decisionState}><button>Move</button></a>\n            <a href={\"/endturn\"}><button>End Turn</button></a>\n            <a href={\"/newgame\"}><button>New Game</button></a>\n          </div>\n      </div>\n    );\n  };\n};\n\nexport default App;"]},"metadata":{},"sourceType":"module"}