{"ast":null,"code":"var _jsxFileName = \"/Users/nathanan/Documents/CMU Senior Spring 2022/17-514 Software Construction/hw5_santorini/santorini/frontend/src/App.tsx\";\nimport Handlebars from \"handlebars\";\nimport { Component } from 'react';\nimport './App.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar oldHref = \"http://localhost:3000\";\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      cells: [{\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=3&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=4&y=0\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=3&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=4&y=1\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=2\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=2\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=2\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=3&y=2\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=4&y=2\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=3\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=3\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=3\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=3&y=3\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=4&y=3\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=0&y=4\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=1&y=4\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=2&y=4\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=3&y=4\"\n      }, {\n        text: \"\",\n        clazz: \"playable\",\n        link: \"/play?x=4&y=4\"\n      }],\n      template: this.loadTemplate(),\n      instructions: \"It is Player 2's turn\",\n      selection: -1\n    };\n    this.clickHandler = this.clickHandler.bind(this);\n  }\n\n  clickHandler() {\n    console.log(\"hi\");\n    alert(\"hi\"); //this.setState({selection: index});\n  }\n\n  loadTemplate() {\n    const src = document.getElementById(\"handlebars\");\n    return Handlebars.compile(src === null || src === void 0 ? void 0 : src.innerHTML, {});\n  }\n\n  convertToCell(p) {\n    const newCells = [];\n\n    for (var i = 0; i < p[\"board\"].length; i++) {\n      var c = {\n        text: p[\"board\"][i][\"text\"],\n        //clazz: p[\"board\"][i][\"clazz\"],\n        clazz: `{alert(\\\"hi\\\")}`,\n        link: p[\"board\"][i][\"link\"]\n      };\n      newCells.push(c);\n    }\n\n    return newCells;\n  }\n\n  getTurn(p) {\n    return p[\"turn\"];\n  }\n\n  getWinner(p) {\n    return p[\"winner\"];\n  }\n\n  getInstr(turn, winner) {\n    if (winner === undefined) return \"It is Player \" + turn + \"'s turn\";else return \"Player \" + winner + \" wins!\";\n  }\n\n  async newGame() {\n    console.log(\"trying\");\n    const response = await fetch(\"newgame\");\n    const json = await response.json();\n    const turn = this.getTurn(json);\n    console.log(turn);\n    console.log(json);\n    const newCells = this.convertToCell(json);\n    this.setState({\n      cells: newCells,\n      instructions: \"It is Player 0's turn\"\n    });\n  }\n\n  async play(url) {\n    const href = \"play?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n    const newCells = this.convertToCell(json);\n    const turn = this.getTurn(json);\n    console.log(turn);\n    const winner = this.getWinner(json);\n    const instr = this.getInstr(turn, winner);\n    this.setState({\n      cells: newCells,\n      instructions: instr\n    });\n  }\n\n  async undo() {\n    const response = await fetch(\"undo\");\n    const json = await response.json();\n    const newCells = this.convertToCell(json);\n    const turn = this.getTurn(json);\n    const winner = this.getWinner(json);\n    const instr = this.getInstr(turn, winner);\n    this.setState({\n      cells: newCells,\n      instructions: instr\n    });\n  }\n\n  async switch() {\n    if (window.location.href === \"http://localhost:3000/newgame\" && oldHref !== window.location.href) {\n      this.newGame();\n      oldHref = window.location.href;\n    } else if (window.location.href.split(\"?\")[0] === \"http://localhost:3000/play\" && oldHref !== window.location.href) {\n      this.play(window.location.href);\n      oldHref = window.location.href;\n    } else if (window.location.href === \"http://localhost:3000/undo\" && oldHref !== window.location.href) {\n      this.undo();\n      oldHref = window.location.href;\n    }\n  }\n\n  render() {\n    //this.switch()\n    console.log(this.state.instructions);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"handlebars\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"instructions\",\n          children: this.state.instructions\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"board\",\n          children: this.state.cells.map(_ref => {\n            let {\n              text,\n              clazz,\n              link\n            } = _ref;\n            return `<a><div class=\"cell\" onClick=${clazz}>{{text}}</div></a>`;\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 169,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"bottombar\",\n          children: [/*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/build\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              children: \"Build\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 177,\n              columnNumber: 30\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 177,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/move\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              children: \"Move\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 178,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/endTurn\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              children: \"End Turn\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 32\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n            href: \"/newgame\",\n            children: /*#__PURE__*/_jsxDEV(\"button\", {\n              children: \"New Game\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 32\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\n;\nexport default App;","map":{"version":3,"sources":["/Users/nathanan/Documents/CMU Senior Spring 2022/17-514 Software Construction/hw5_santorini/santorini/frontend/src/App.tsx"],"names":["Handlebars","Component","oldHref","App","constructor","props","state","cells","text","clazz","link","template","loadTemplate","instructions","selection","clickHandler","bind","console","log","alert","src","document","getElementById","compile","innerHTML","convertToCell","p","newCells","i","length","c","push","getTurn","getWinner","getInstr","turn","winner","undefined","newGame","response","fetch","json","setState","play","url","href","split","instr","undo","switch","window","location","render","map"],"mappings":"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","sourcesContent":["import Handlebars from \"handlebars\"\nimport { Component } from 'react'\nimport './App.css'\n\nvar oldHref = \"http://localhost:3000\"\n\ninterface Cell {\n  text: String;\n  clazz: String;\n  link: String;\n}\n\ninterface Cells {\n  cells: Array<Cell>,\n  template: HandlebarsTemplateDelegate<any>,\n  instructions: String,\n  selection: number\n}\n\ninterface Props {\n}\n\nclass App extends Component<Props, Cells> {\n  constructor(props: Props) {\n    super(props);\n    this.state = {\n      cells: [\n        { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=0\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=1&y=0\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=2&y=0\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=3&y=0\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=4&y=0\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=1\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=1&y=1\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=2&y=1\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=3&y=1\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=4&y=1\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=2\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=1&y=2\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=2&y=2\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=3&y=2\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=4&y=2\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=3\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=1&y=3\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=2&y=3\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=3&y=3\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=4&y=3\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=0&y=4\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=1&y=4\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=2&y=4\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=3&y=4\" },\n        { text: \"\", clazz: \"playable\", link: \"/play?x=4&y=4\" },\n      ],\n      template: this.loadTemplate(),\n      instructions: \"It is Player 2's turn\",\n      selection: -1,\n    };\n    this.clickHandler = this.clickHandler.bind(this);\n\n  }\n\n  clickHandler(){\n    console.log(\"hi\")\n    alert(\"hi\")\n    //this.setState({selection: index});\n  }\n\n  loadTemplate (): HandlebarsTemplateDelegate<any> {\n    const src = document.getElementById(\"handlebars\");\n    return Handlebars.compile(src?.innerHTML, {});\n  }\n\n  convertToCell(p: any): Array<Cell> {\n    const newCells: Array<Cell> = [];\n    for (var i = 0; i < p[\"board\"].length; i++) {\n      var c: Cell = {\n        text: p[\"board\"][i][\"text\"],\n        //clazz: p[\"board\"][i][\"clazz\"],\n        clazz: `{alert(\\\"hi\\\")}`,\n        link: p[\"board\"][i][\"link\"],\n      };\n      newCells.push(c);\n    }\n\n    return newCells;\n  }\n\n  getTurn(p: any): String {\n    return p[\"turn\"]\n  }\n\n  getWinner(p: any): String | undefined {\n    return p[\"winner\"]\n  }\n\n  getInstr(turn: String, winner: String | undefined) {\n    if (winner === undefined) return \"It is Player \" + turn + \"'s turn\"\n    else return \"Player \" + winner + \" wins!\"\n  }\n\n  async newGame() {\n    console.log(\"trying\")\n    const response = await fetch(\"newgame\");\n    const json = await response.json();\n    const turn = this.getTurn(json)\n    console.log(turn)\n\n    console.log(json)\n    const newCells: Array<Cell> = this.convertToCell(json);\n    this.setState({ cells: newCells, instructions: \"It is Player 0's turn\"})\n  }\n\n  async play(url: String) {\n    const href = \"play?\" + url.split(\"?\")[1];\n    const response = await fetch(href);\n    const json = await response.json();\n\n    const newCells: Array<Cell> = this.convertToCell(json);\n    const turn = this.getTurn(json)\n    console.log(turn);\n    const winner = this.getWinner(json)\n    const instr = this.getInstr(turn, winner)\n    this.setState({ cells: newCells, instructions: instr })\n  }\n\n  async undo() {\n    const response = await fetch(\"undo\");\n    const json = await response.json();\n\n    const newCells: Array<Cell> = this.convertToCell(json);\n    const turn = this.getTurn(json)\n    const winner = this.getWinner(json)\n    const instr = this.getInstr(turn, winner)\n    this.setState({ cells: newCells, instructions: instr })\n  }\n\n  async switch() {\n    if (\n      window.location.href === \"http://localhost:3000/newgame\" &&\n      oldHref !== window.location.href\n    ) {\n      this.newGame();\n      oldHref = window.location.href;\n    } else if (\n      window.location.href.split(\"?\")[0] === \"http://localhost:3000/play\" &&\n      oldHref !== window.location.href\n    ) {\n      this.play(window.location.href);\n      oldHref = window.location.href;\n    } else if (\n      window.location.href === \"http://localhost:3000/undo\" &&\n      oldHref !== window.location.href\n    ) {\n      this.undo();\n      oldHref = window.location.href;\n    }\n  };\n\n  render() {\n    //this.switch()\n    console.log(this.state.instructions)\n    return (\n      <div className=\"App\">\n        <div id=\"handlebars\">\n          <div id=\"instructions\">\n            {this.state.instructions}\n          </div>\n\n          <div id=\"board\">\n            {this.state.cells.map(\n              ({ text, clazz, link }) => `<a><div class=\"cell\" onClick=${clazz}>{{text}}</div></a>`\n            )}\n          </div>\n       \n          \n          <div id=\"bottombar\">\n            <a href=\"/build\"><button>Build</button></a>\n            <a href=\"/move\"><button>Move</button></a>\n            <a href=\"/endTurn\"><button>End Turn</button></a>\n            <a href=\"/newgame\"><button>New Game</button></a>\n          </div>\n        </div>\n      </div>\n    )\n  };\n};\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}